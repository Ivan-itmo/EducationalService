<!-- src/app/pages/student/home/home.html -->
<div class="home-container">
  <h1>–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞</h1>

  <div class="home-actions">
    <button class="btn btn-profile" routerLink="/student/profile">
      üë§ {{ username }} (ID: {{ userId }})
    </button>
    <button class="btn btn-logout" (click)="logout()">
      üö™ –í—ã–π—Ç–∏
    </button>
  </div>

  <!-- –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —á–∞—Ç–∞ -->
  <div class="chat-section">
    <h2>–ù–∞—á–∞—Ç—å –Ω–æ–≤—ã–π —á–∞—Ç</h2>
    <div class="form-group">
      <label for="targetUserId">ID —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞:</label>
      <input
        id="targetUserId"
        type="number"
        [(ngModel)]="targetUserId"
        class="form-control"
        placeholder="–í–≤–µ–¥–∏—Ç–µ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
        min="1"
      />
    </div>
    <button
      class="btn btn-primary"
      (click)="startChat()"
      [disabled]="!targetUserId || targetUserId <= 0"
    >
      üí¨ –°–æ–∑–¥–∞—Ç—å —á–∞—Ç
    </button>
  </div>

  <!-- –°–ø–∏—Å–æ–∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —á–∞—Ç–æ–≤ -->
  @if (chats.length > 0) {
    <div class="chats-list">
      <h2>–í–∞—à–∏ —á–∞—Ç—ã</h2>
      @for (chat of chats; track chat.id) {
        <div class="chat-item" (click)="openChat(chat.id)">
          <div class="chat-partner">–ß–∞—Ç —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º ID: {{ getOtherUserId(chat) }}</div>
          <div class="chat-time">{{ chat.createdAt | date:'dd.MM.yy HH:mm' }}</div>
        </div>
      }
    </div>
  }
</div>
